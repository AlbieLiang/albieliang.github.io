---
layout: post
category : Weex小试牛刀之demo演示
tagline: "预研"
tags : [预研, Weex]
---
{% include JB/setup %}

## Weex项目

Weex的github地址：[https://github.com/alibaba/weex](https://github.com/alibaba/weex)

具体的安装流程在github上有写，下面就简单列下环境搭建流程，若有变更，请移步官方说明了解详情；

## 发布当个简单页面

创建一个demo目录，cd到该目录下，创建一个demo.we文件，把官方文档上的示例代码贴到里面，或参考着改一下。
文件目录如下：
  -- demo
     -- demo.we

文件内容为：
  <template>
    <div class="container">
      <div class="cell">
          <image class="thumb" src="http://t.cn/RGE3AJt"></image>
          <text class="title">JavaScript</text>
      </div>
    </div>
  </template>

  <style>
    .cell { margin-top: 10; margin-left: 10; flex-direction: row; }
    .thumb { width: 200; height: 200; }
    .title { text-align: center; flex: 1; color: grey; font-size: 50; }
  </style>

通过命令：`weex demo.we --qr -h localhost`（格式：`weex filename.we --qr -h {ip or hostname}`）设成一个二维码，有了二维码之后，我们需要下载调试页面的[Weex Playground](http://alibaba.github.io/weex/download.html)，然后用安装好的APP去扫上面生成的二维码，页面就打开了。

## 调试Weex

Weex调试类似于Web页面调试，需要首先安装[weex-toolkit](https://www.npmjs.com/package/weex-toolkit)

## 编译Weex文件

其实应该叫翻译或转换Weex文件

（1）翻译单个*.we文件的命令是：`$weex <filename.we>  -o <outputpath>`

（2）翻译一个目录下的所有*.we文件到某个目录下，命令是：`$weex <we/file/storage/path>  -o <outputpath>`

（3）翻译文件并监听文件的变更，需要在命令后面加上`--watch`，如：`$weex <filename.we>  -o <outputpath> --watch`

（4）预览Weex页面，可以通过命令`$weex your_best_weex.we  --qr`生成二维码，在使用Playground APP扫描，即可调试了。

## 遇到的问题

1）手机和电脑不在同个局域网内，访问不到，无法调试
由于公司限制了设备之间的通讯，手机无法通过Weex开的WebSocket Server直连电脑。
解决方案：
（1）在电脑上开启热点，让手机连上，便可调试；
这个就不详细说了，比较简单，且容易理解。
（2）通过USB端口映射，让手机的端口与PC的端口构成一个映射关系；
其实就是把终端设备的端口直接映射到PC端口上，或把PC端口映射到终端设备的端口上，具体操作如下：
首先，确定好要映射的端口，例如我要把PC端口8080映射到终端端口上8081上，这样PC上访问8080端口实际上访问的是终端的8081端口，
命令如下：`adb forward tcp:8080 tcp:8081`。这样我们在PC机的浏览器上输入http://127.0.0.1:8080就可以访问到终端设备上的8081端口了。

如果我们想在终端上访问PC上的某个端口时，可以采用类似于`adb forward <localPort> <remotePort>`的命令，命令格式是`adb reverse <localPort> <remotePort>`。

2）

## 相关连接

Weex的github地址：[https://github.com/alibaba/weex](https://github.com/alibaba/weex)
Node.js地址：[https://nodejs.org/en/](https://nodejs.org/en/)
weex-toolkit安装引导：[https://www.npmjs.com/package/weex-toolkit](https://www.npmjs.com/package/weex-toolkit)
Weex Playground下载：[http://alibaba.github.io/weex/download.html](http://alibaba.github.io/weex/download.html)
